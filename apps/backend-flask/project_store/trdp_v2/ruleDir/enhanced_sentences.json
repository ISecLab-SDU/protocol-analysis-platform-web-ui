[
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.1 Communication model",
    "sentence": "PD-PDUs shall be cyclically transmitted or transmitted on request between a publisher and one or many subscribers.",
    "enhanced_sentence": "The TRDP process data protocol defines the exchange of PD-PDUs for process data transfer. PD-PDUs shall be transmitted either cyclically according to a configured transmission interval or on-demand in response to explicit requests, enabling communication between a single publisher and one or multiple subscribers. This transmission behavior applies during normal protocol operation when process data needs to be exchanged, ensuring timely and reliable data delivery while supporting both periodic updates and event-driven communication patterns.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.1 Communication model\"\nRule: PD-PDUs shall be cyclically transmitted or transmitted on request between a publisher and one or many subscribers.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.1 Communication model",
    "sentence": "The TRDP process data protocol defines the exchange of PD-PDUs for the transfer of process data.",
    "enhanced_sentence": "The TRDP process data protocol governs the exchange of Process Data Protocol Data Units (PD-PDUs) between communication endpoints to facilitate process data transfer. This rule applies during normal protocol operation when a publisher needs to distribute process data to one or multiple subscribers. The expected outcome is reliable data transmission through either cyclic (periodic) or on-demand (request-based) exchange mechanisms. Prerequisites include established communication sessions between publisher and subscriber(s), proper configuration of transmission modes (cyclic/on-request), and valid PD-PDU formatting according to TRDP specifications.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.1 Communication model\"\nRule: The TRDP process data protocol defines the exchange of PD-PDUs for the transfer of process data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.2 Lower Layers -> A.2.3 Transport Layer",
    "sentence": "Any TRDP process data shall be sent with UDP.",
    "enhanced_sentence": "TRDP process data shall be transmitted exclusively using the UDP transport protocol (RFC 768), as this protocol provides the connectionless, low-latency communication required for real-time process data exchange. This rule applies whenever TRDP process data is being transmitted between devices and ensures deterministic delivery timing without the overhead of connection establishment or guaranteed delivery mechanisms. The use of UDP for process data enables predictable performance for time-critical industrial applications, while TRDP message data may optionally use either UDP or TCP based on application requirements.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.2 Lower Layers -> A.2.3 Transport Layer\"\nRule: Any TRDP process data shall be sent with UDP.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.2 Lower Layers -> A.2.3 Transport Layer",
    "sentence": "TRDP process data packet size shall be specified.",
    "enhanced_sentence": "TRDP process data packets transmitted via UDP shall have their maximum packet size explicitly specified in the protocol configuration to ensure proper network operation and prevent fragmentation. This requirement applies during the protocol initialization and configuration phase before any process data transmission occurs. The expected outcome is deterministic network behavior with predictable bandwidth usage and avoidance of IP fragmentation. This rule applies specifically to TRDP process data communications (which must use UDP) and does not apply to message data communications (which may use TCP or UDP). The packet size specification must consider the underlying Ethernet MTU (approximately 1500 bytes) and any network infrastructure constraints.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.2 Lower Layers -> A.2.3 Transport Layer\"\nRule: TRDP process data packet size shall be specified.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.4 Interaction between TRDP user and TRDP Layer",
    "sentence": "The TRDP layer shall provide services for process data and message data communication.",
    "enhanced_sentence": "The TRDP layer shall provide distinct communication services for both process data (cyclic, real-time data exchange with publisher-subscriber model) and message data (event-driven, connection-oriented data exchange with request-reply model). This rule applies during protocol initialization and throughout normal operation, requiring the TRDP layer to establish and maintain appropriate communication channels, handle data formatting according to TRDP specifications, and ensure reliable data transmission. The expected outcome is seamless support for both communication paradigms with proper isolation and management of their respective quality-of-service parameters. Prerequisites include successful TRDP layer initialization and proper configuration of communication parameters for each data type.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.4 Interaction between TRDP user and TRDP Layer\"\nRule: The TRDP layer shall provide services for process data and message data communication.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)",
    "sentence": "The ComId shall be set to zero (ComId = 0) in the following cases: for PDUs with unspecified user dataset.",
    "enhanced_sentence": "The Communication Identifier (ComId) must be set to zero (ComId = 0) when transmitting Protocol Data Units (PDUs) that contain an unspecified user dataset. This applies specifically during protocol initialization, diagnostic exchanges, or when transmitting PDUs without defined application data structures. The zero ComId value signals that the PDU does not correspond to any standardized dataset definition and should be processed accordingly by receiving entities. This rule ensures proper protocol operation when no specific dataset mapping exists, while maintaining the fundamental requirement that ComId values 1-999 remain reserved for system purposes.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)\"\nRule: The ComId shall be set to zero (ComId = 0) in the following cases: for PDUs with unspecified user dataset.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)",
    "sentence": "All TRDP communication uses a so called ComId transmitted in the header of each PDU.",
    "enhanced_sentence": "All TRDP communication must include a Communication Identifier (ComId) in the header of each Protocol Data Unit (PDU). This rule applies to every PDU transmission in the protocol flow and ensures that each message can be uniquely identified when combined with source and destination IP addresses. The ComId must correspond to a specific dataset structure and be standardized within application profiles. Exceptions include: ComId = 0 for PDUs with unspecified user datasets, and ComIds 1-999 are reserved for protocol-specific purposes and must not be used by applications. Proper implementation ensures correct message routing, processing, and compliance with TRDP addressing requirements.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)\"\nRule: All TRDP communication uses a so called ComId transmitted in the header of each PDU.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId) -> Table A.2 芒聙聯 Reserved ComIds",
    "sentence": "ComId 3715 has an unspecified PDU service description.",
    "enhanced_sentence": "ComId 3715 is designated as a reserved Communication Identifier with an unspecified PDU service description, meaning its protocol data unit format and associated service behavior are not defined in the current TRDP specification. This rule applies during protocol implementation when processing or assigning ComIds, requiring that ComId 3715 must not be used for any application-specific data exchange until officially specified in future protocol revisions. The expected outcome is that systems will treat this ComId as undefined and avoid its utilization, ensuring interoperability and preventing potential conflicts with future protocol extensions. This reservation applies unconditionally to all TRDP implementations compliant with the current specification version.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId) -> Table A.2 芒聙聯 Reserved ComIds\"\nRule: ComId 3715 has an unspecified PDU service description.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)",
    "sentence": "The ComId is application dependent but should be standardized in the application profiles.",
    "enhanced_sentence": "The ComId serves as a unique communication identifier when combined with source and destination IP addresses in TRDP PDUs. While the ComId value is determined by application requirements, it must be standardized within defined application profiles to ensure interoperability across implementations. This rule applies during ComId assignment in the protocol configuration phase and requires that the ComId maintains a one-to-one relationship with the dataset structure. The expected outcome is consistent identification of data flows across different TRDP implementations. Prerequisites include: ComId values 1-999 are reserved for protocol-specific purposes and cannot be used by applications, and ComId must be set to zero for PDUs carrying unspecified user datasets.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)\"\nRule: The ComId is application dependent but should be standardized in the application profiles.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.2 Lower Layers -> A.2.2 Network Layer",
    "sentence": "NOTE 3: Depending on the safety and security concept, ordinary process data and message data might use different communication channels.",
    "enhanced_sentence": "In TRDP implementations, the protocol allows for segregation of data traffic types based on safety and security requirements. Specifically, ordinary process data (real-time operational data) and message data (event-driven notifications or commands) may be transmitted over distinct communication channels. This separation applies during the network layer data routing phase and should be implemented when the system's safety integrity level or security policy requires isolation between data types. The expected outcome is enhanced system reliability and security through controlled data flow segregation. Prerequisites include a defined safety/security concept that specifies channel separation requirements and proper configuration of network infrastructure (e.g., ETBN gateway) to enforce the designated channel assignments.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.2 Lower Layers -> A.2.2 Network Layer\"\nRule: NOTE 3: Depending on the safety and security concept, ordinary process data and message data might use different communication channels.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)",
    "sentence": "The ComId has a one-to-one relation with the data set structure.",
    "enhanced_sentence": "The ComId value in TRDP PDUs must maintain a strict one-to-one correspondence with the data set structure definition, meaning each unique ComId identifies exactly one specific data structure format and payload composition. This mapping applies during all protocol communication phases where PDUs are constructed, transmitted, or processed, ensuring that receivers can correctly interpret the data content based solely on the ComId value. When this rule is followed, systems can reliably parse incoming data without requiring additional structural metadata, and data integrity is maintained across the network. Prerequisites include proper ComId registration in application profiles and avoidance of reserved ComId ranges (0, 1-999), with ComId=0 being reserved exclusively for PDUs containing unspecified user datasets.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)\"\nRule: The ComId has a one-to-one relation with the data set structure.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.2 Roles",
    "sentence": "The communication partners in a process data transfer can have different roles: publisher is the source of process data, subscriber is the sink of process data, and requester requests the publisher to publish its process data.",
    "enhanced_sentence": "In TRDP process data transfers, communication partners assume distinct functional roles that determine data flow direction and initiation mechanisms. The publisher serves as the data source that generates and transmits process data, the subscriber acts as the data sink that receives and consumes process data, and the requester actively solicits data publication from the publisher. This role assignment governs how process data exchanges are initiated and executed throughout the protocol lifecycle. In push-mode communication, the publisher inherently performs the requester function to initiate unsolicited data transmissions. Conversely, in pull-mode communication, subscribers may also operate as requesters to explicitly demand data updates from publishers. The expected outcome is proper role-based message handling where publishers respond to requests and subscribers process incoming data according to their configured communication pattern. Prerequisites include established communication sessions and properly configured role assignments in the TRDP stack implementation.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.2 Roles\"\nRule: The communication partners in a process data transfer can have different roles: publisher is the source of process data, subscriber is the sink of process data, and requester requests the publisher to publish its process data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)",
    "sentence": "The ComIds 1..999 shall not be used by the application since they are reserved for specific purposes.",
    "enhanced_sentence": "The ComId (Communication Identifier) is a mandatory header field in all TRDP PDUs that, together with source and destination IP addresses, uniquely identifies communication streams and has a one-to-one relationship with dataset structures. During application design and ComId assignment, the range 1-999 must be excluded from application use as these values are reserved for protocol-specific purposes and internal functions. When implementing TRDP communication, applications must select ComIds from the available range starting at 1000 to ensure proper protocol operation and avoid conflicts with reserved system functions. This rule applies throughout the protocol lifecycle, from initial configuration to runtime operation, and compliance ensures correct PDU processing and maintains protocol integrity.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.5 Communication Identifier (ComId)\"\nRule: The ComIds 1..999 shall not be used by the application since they are reserved for specific purposes.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.7 芒聙聯 PD publisher state diagram 芒聙聯 triggers",
    "sentence": "Triggers Description: PD.publish user called PD.publish service primitive continues publishing train-wide process data.",
    "enhanced_sentence": "This trigger governs the behavior when the PD.publish user calls the PD.publish service primitive to maintain continuous publication of train-wide process data. It applies during normal PD publisher operation when topology changes occur, requiring immediate data dissemination. The expected outcome is that the protocol invokes either PD.putData or PD.putDataImmediate service primitive to ensure timely data distribution across the network. Prerequisites include: the publisher must be in an active publishing state, topology count must have changed, and the communication session must be properly established with valid configuration parameters.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.7 芒聙聯 PD publisher state diagram 芒聙聯 triggers\"\nRule: Triggers Description: PD.publish user called PD.publish service primitive continues publishing train-wide process data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.1 Service primitives",
    "sentence": "The TRDP layer shall provide a service for process data communication to the TRDP user.",
    "enhanced_sentence": "The TRDP protocol layer shall provide a standardized service interface for process data communication to the TRDP user application, enabling the exchange of real-time operational data between train subsystems. This service applies during normal protocol operation when the application initiates data transmission or reception, and shall ensure reliable delivery of process data according to configured quality of service parameters. The expected outcome is a consistent, implementation-agnostic communication service that abstracts underlying protocol details while maintaining interoperability. Prerequisites include proper protocol stack initialization and valid configuration of communication parameters.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.1 Service primitives\"\nRule: The TRDP layer shall provide a service for process data communication to the TRDP user.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> A.6.3.2 Pull communication pattern",
    "sentence": "A dedicated subscriber is requesting the known publisher to send its PD-PDU.",
    "enhanced_sentence": "In the TRDP v2 pull communication pattern for process data exchange, when a dedicated subscriber needs to obtain data from a known publisher, it shall actively request the publisher to transmit its PD-PDU. This rule applies specifically to point-to-point communication without acknowledgment, where the subscriber has prior knowledge of the publisher's identity. The expected outcome is that upon receiving the request, the publisher will send its process data PDU to the requesting subscriber. This mechanism requires that the subscriber has been properly configured with the publisher's addressing information and that both parties are operating within the established communication session parameters.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> A.6.3.2 Pull communication pattern\"\nRule: A dedicated subscriber is requesting the known publisher to send its PD-PDU.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.8 芒聙聯 PD publisher state diagram 芒聙聯 actions",
    "sentence": "txTime equals cycle time for sending process data as defined in PD.publish service.",
    "enhanced_sentence": "During normal PD publisher operation, when the transmission timer expires, the txTime parameter must be set equal to the configured cycle time as defined in the PD.publish service. This applies specifically when the publisher is in the \"Publishing\" state and is preparing to send process data telegrams. The expected outcome is that the PD telegram is transmitted at the specified periodic interval, maintaining the required real-time data delivery schedule. This action requires that the PD.publish service has been properly configured with a valid cycle time and that the publisher has successfully initialized all necessary communication parameters.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.8 芒聙聯 PD publisher state diagram 芒聙聯 actions\"\nRule: txTime equals cycle time for sending process data as defined in PD.publish service.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> Figure A.7 芒聙聯 PD pull pattern (point to point, sink knows source)",
    "sentence": "The IEC publisher requester exchanges PD-PDU messages in a pattern of request and reply, as specified in IEC CD 61375-2-3 IEC 2024 document 9/3102/CD.",
    "enhanced_sentence": "The IEC publisher requester shall exchange Process Data Protocol Data Unit (PD-PDU) messages using a request-reply communication pattern, as defined in IEC CD 61375-2-3 (document 9/3102/CD, 2024). This rule applies specifically to the PD pull pattern in point-to-point communication where the sink (requester) initiates data retrieval from a known source (publisher). The expected behavior is that the requester sends a PD request message, and the publisher responds with a corresponding PD reply containing the requested process data. This pattern requires that the requester has prior knowledge of the publisher's address and is used when periodic push-based communication is not suitable.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> Figure A.7 芒聙聯 PD pull pattern (point to point, sink knows source)\"\nRule: The IEC publisher requester exchanges PD-PDU messages in a pattern of request and reply, as specified in IEC CD 61375-2-3 IEC 2024 document 9/3102/CD.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> Figure A.8 芒聙聯 PD pull pattern (multipoint to point, sink does not know source)",
    "sentence": "The IEC publisher requester exchanges PD-PDU requests and replies in a pattern where PD-PDU requests are followed by multiple PD-PDU replies from the publisher.",
    "enhanced_sentence": "In the TRDP v2 PD pull pattern (multipoint to point), the IEC publisher requester initiates communication by sending PD-PDU requests, which are then followed by multiple PD-PDU replies from one or more publishers. This rule applies specifically when the sink (requester) does not know the source(s) in advance and operates in a multicast or broadcast context. The expected outcome is that each request triggers replies from all relevant publishers, enabling the requester to collect process data from multiple sources without prior knowledge of their identities. Prerequisites include proper multicast/broadcast network configuration and publisher registration with the relevant multicast groups.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> Figure A.8 芒聙聯 PD pull pattern (multipoint to point, sink does not know source)\"\nRule: The IEC publisher requester exchanges PD-PDU requests and replies in a pattern where PD-PDU requests are followed by multiple PD-PDU replies from the publisher.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> Figure A.9 芒聙聯 PD pull pattern (point to multipoint, sink knows source)",
    "sentence": "The IEC subscriber publisher requester exchanges PD-PDU replies and requests according to the PD pull pattern where the sink knows the source.",
    "enhanced_sentence": "The IEC subscriber publisher requester shall exchange PD-PDU replies and requests following the PD pull pattern (point-to-multipoint) where the sink (subscriber) has prior knowledge of the source (publisher) identity. This rule applies when initiating PD communication sessions where the sink actively requests data from known sources, and governs the sequence of request-reply exchanges between subscriber and publisher entities. The expected outcome is successful retrieval of process data by the sink from one or multiple pre-configured sources, with the publisher responding to valid requests from authorized subscribers. Prerequisites include proper configuration of source addresses at the sink, established network connectivity, and valid session initialization between communicating parties.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> Figure A.9 芒聙聯 PD pull pattern (point to multipoint, sink knows source)\"\nRule: The IEC subscriber publisher requester exchanges PD-PDU replies and requests according to the PD pull pattern where the sink knows the source.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> A.6.3.2 Pull communication pattern",
    "sentence": "Here, one dedicated subscriber is requesting one or multiple unknown publishers to send their PD-PDU data.",
    "enhanced_sentence": "In the TRDP v2 pull communication pattern for process data exchange, when a dedicated subscriber initiates a request to one or multiple publishers whose identities are not known in advance, the subscriber shall broadcast or multicast a PD-PDU request. This rule applies when the subscriber does not have prior knowledge of publisher addresses but expects to receive process data from any responding publishers in the network. The expected outcome is that any publisher configured to respond to such requests shall transmit its PD-PDU data to the subscriber. This pattern requires that the network supports broadcast/multicast communication and that publishers are configured to listen and respond to these general requests.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.3 Communication pattern -> A.6.3.2 Pull communication pattern\"\nRule: Here, one dedicated subscriber is requesting one or multiple unknown publishers to send their PD-PDU data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Figure A.11 芒聙聯 PD-PDU",
    "sentence": "The PD_PDU record structure includes dataset, sequenceCounter, protocolVersion, etbTopoCnt, datasetLength, replyComId, msgType, 40 octets reserved, replyIpAddress, 24 octets headerFCS, and opTrnTopoCnt fields as defined in IEC CD 61375-2-3 IEC 2024.",
    "enhanced_sentence": "The PD_PDU record structure must include the following fields in the specified order: dataset, sequenceCounter, protocolVersion, etbTopoCnt, datasetLength, replyComId, msgType, 40 octets reserved, replyIpAddress, 24 octets headerFCS, and opTrnTopoCnt. This structure definition applies during the formation and parsing of Process Data Protocol Data Units (PD-PDUs) as specified in IEC CD 61375-2-3 IEC 2024. The expected outcome is proper protocol compliance ensuring interoperability between TRDP v2 devices, with the prerequisite that implementations must adhere to the exact field sequence and sizes defined in the standard for successful data exchange and validation.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Figure A.11 芒聙聯 PD-PDU\"\nRule: The PD_PDU record structure includes dataset, sequenceCounter, protocolVersion, etbTopoCnt, datasetLength, replyComId, msgType, 40 octets reserved, replyIpAddress, 24 octets headerFCS, and opTrnTopoCnt fields as defined in IEC CD 61375-2-3 IEC 2024.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU",
    "sentence": "The structure of a PD-PDU is defined in Figure A.11 and in ASN.1 notation, with additional IEC subscriber, publisher, and requester roles for PD-PDU request and reply messages.",
    "enhanced_sentence": "The structure of a Process Data Protocol Data Unit (PD-PDU) is formally specified in Figure A.11 and using ASN.1 notation, which defines the exact format and encoding of PD-PDU messages. This rule applies when implementing PD-PDU communication in TRDP v2 systems, where the protocol supports three distinct IEC roles: subscribers (receiving data), publishers (sending data), and requesters (initiating request-reply exchanges). The expected outcome is correct message construction and interpretation according to the defined structure, enabling interoperable data exchange between TRDP-compliant devices. Prerequisites include understanding the PD-PDU header fields, data payload format, and the specific role (subscriber, publisher, or requester) that a device assumes in the communication flow.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU\"\nRule: The structure of a PD-PDU is defined in Figure A.11 and in ASN.1 notation, with additional IEC subscriber, publisher, and requester roles for PD-PDU request and reply messages.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.9 芒聙聯 PD publisher state diagram 芒聙聯 states",
    "sentence": "States Description: CyclicOperation - The publisher sends PD-PDUs cyclically triggered by a timer",
    "enhanced_sentence": "In the TRDP v2 PD publisher state machine, the CyclicOperation state governs the primary data transmission behavior where the publisher periodically sends Process Data Protocol Data Units (PD-PDUs) at regular intervals determined by a configured timer. This state applies after successful initialization and upon receiving a start command, when the publisher transitions from idle or initialization states into active data distribution. The expected outcome is continuous, time-triggered transmission of PD-PDUs containing current process data values to all subscribed consumers, maintaining the real-time data flow required for train control systems. Prerequisites include proper configuration of the cycle timer interval, valid PD message composition, established communication parameters, and confirmed subscriber presence through the protocol's discovery mechanism.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.9 芒聙聯 PD publisher state diagram 芒聙聯 states\"\nRule: States Description: CyclicOperation - The publisher sends PD-PDUs cyclically triggered by a timer\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.6 芒聙聯 PD publisher state diagram 芒聙聯 guards",
    "sentence": "PolledOperation: [pattern == PULL] PD.putData / restartTimer(txTime).",
    "enhanced_sentence": "When the communication pattern is configured as PULL mode (pattern == PULL), upon receiving a poll request from a subscriber, the publisher shall execute the PolledOperation by calling PD.putData to transmit the current process data and simultaneously restart the transmission timer (txTime) to maintain proper timing synchronization. This rule applies specifically to polled communication scenarios where data transmission is initiated by subscriber requests rather than publisher-driven cycles, ensuring that data is only sent when explicitly requested while maintaining the required timing parameters for subsequent operations.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.6 芒聙聯 PD publisher state diagram 芒聙聯 guards\"\nRule: PolledOperation: [pattern == PULL] PD.putData / restartTimer(txTime).\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.11 芒聙聯 PD requester state diagram 芒聙聯 triggers",
    "sentence": "Triggers Description: PD.request is a service primitive called by the application",
    "enhanced_sentence": "PD.request is a service primitive called by the application layer to initiate a Process Data request. This trigger applies when the application needs to send data to or request data from a PD responder, typically during normal operational states where communication is established and session parameters are configured. The expected outcome is the transition to a state where protocol message assembly and transmission occur, provided that the communication interface is available and session prerequisites (such as valid COM IDs and configured communication parameters) are met.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.11 芒聙聯 PD requester state diagram 芒聙聯 triggers\"\nRule: Triggers Description: PD.request is a service primitive called by the application\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.2 Request publishing of PD-PDU (PD request)",
    "sentence": "One dedicated subscriber or an independent communication device may request one or many PD-PDUs.",
    "enhanced_sentence": "In the TRDP v2 protocol, when operating within the PD request state machine, a single dedicated subscriber or an independent communication device is permitted to issue a request for one or multiple Process Data Protocol Data Units (PD-PDUs). This rule applies during the request publishing phase, where the subscriber or device initiates communication to solicit data from publishers. The expected outcome is that the requesting entity receives the specified PD-PDUs according to the protocol's data exchange mechanisms. Prerequisites include proper configuration of the subscriber or device within the network and adherence to the protocol's timing and addressing requirements to ensure valid and orderly data transmission.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.2 Request publishing of PD-PDU (PD request)\"\nRule: One dedicated subscriber or an independent communication device may request one or many PD-PDUs.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.6 芒聙聯 PD publisher state diagram 芒聙聯 guards",
    "sentence": "Guards Description: pattern configured communication pattern for the PD-PDU exchange.",
    "enhanced_sentence": "The \"pattern\" guard defines the configured communication pattern for Process Data (PD) Protocol Data Unit (PDU) exchange, which governs how PD publishers and subscribers interact. This rule applies during PD session establishment and determines the operational mode for data transmission. When the pattern is set to PUSH, the publisher autonomously sends data cyclically without subscriber requests. When set to PULL, the publisher only transmits data in response to explicit subscriber requests. The expected outcome is proper alignment between publisher behavior and the configured communication paradigm, ensuring protocol-compliant data exchange. Prerequisites include successful PD session initialization and proper configuration of the communication pattern parameter during session setup.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.6 芒聙聯 PD publisher state diagram 芒聙聯 guards\"\nRule: Guards Description: pattern configured communication pattern for the PD-PDU exchange.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)",
    "sentence": "NOTE 2: If there is a pull request for a PD-PDU that is already published using the push pattern, the related reply is handled according to the protocol specifications.",
    "enhanced_sentence": "When a PD-PDU has been previously published via push pattern (either TRDP-triggered cyclic or application-triggered) and subsequently receives a pull request for the same data, the publisher must respond according to the standard protocol specifications for pull requests. This ensures consistent data delivery regardless of the initial publication method, maintaining protocol integrity while preventing duplicate or conflicting transmission behaviors. The rule applies specifically when both push and pull patterns target the same PD-PDU data instance, and requires that the publisher's response adheres to the defined message handling procedures without additional rate limitation for the pull reply.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)\"\nRule: NOTE 2: If there is a pull request for a PD-PDU that is already published using the push pattern, the related reply is handled according to the protocol specifications.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)",
    "sentence": "The publishing of PD-PDU(data) is defined with the state diagram depicted in Figure A.16.",
    "enhanced_sentence": "The publishing of PD-PDU(data) occurs under specific triggering conditions: when the configured time cycle expires (push pattern, TRDP-triggered), upon receiving an application request for immediate transmission (push pattern, application-triggered), or in response to a request from a subscriber or independent communication entity. To prevent subscriber overload, TRDP-triggered push PD-PDUs must implement rate limitation. The complete state transitions and behavior for PD-PDU(data) publishing are formally defined in the state diagram in Figure A.16. Note that application-triggered cyclic PD-PDUs should be restricted due to the absence of rate control mechanisms, and pull requests for already pushed PD-PDUs are handled according to established protocol specifications.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)\"\nRule: The publishing of PD-PDU(data) is defined with the state diagram depicted in Figure A.16.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)",
    "sentence": "To not overload subscribers, the publisher of TRDP triggered pushed PD-PDU shall apply a rate limitation.",
    "enhanced_sentence": "When publishing PD-PDUs in TRDP-triggered push mode (where data is sent upon completion of the defined time cycle), the publisher shall implement rate limitation mechanisms to prevent subscriber overload. This rule applies specifically to cyclic push operations initiated by the TRDP layer, not to application-triggered immediate sends or pull request responses. The expected outcome is controlled data transmission that maintains network stability while ensuring subscribers can process incoming PD-PDUs without being overwhelmed. This rate control must be implemented as part of the publisher's state machine logic as defined in Figure A.16, with the understanding that application-triggered cyclic PD-PDUs lack inherent rate control capabilities and should therefore be restricted.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)\"\nRule: To not overload subscribers, the publisher of TRDP triggered pushed PD-PDU shall apply a rate limitation.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)",
    "sentence": "NOTE 1: Sending application triggered cyclic PD-PDUs shall be restricted since there is no possibility to include rate control.",
    "enhanced_sentence": "When operating in application-triggered push mode, the sending of cyclic PD-PDUs must be restricted because this transmission mode lacks built-in rate control mechanisms. This restriction applies specifically when the application initiates immediate data transmission outside the normal TRDP-triggered cycles. The expected outcome is to prevent network and subscriber overload by limiting uncontrolled cyclic transmissions in application-triggered mode. This rule applies only when: (1) the publisher is configured for push pattern operation, (2) transmission is triggered by application request rather than TRDP timer cycle, and (3) the PD-PDU is intended for cyclic publication. Prerequisites include proper configuration of push patterns and clear differentiation between TRDP-triggered and application-triggered transmission modes.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)\"\nRule: NOTE 1: Sending application triggered cyclic PD-PDUs shall be restricted since there is no possibility to include rate control.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern",
    "sentence": "The PD push pattern can be used for any process data.",
    "enhanced_sentence": "The PD push pattern is applicable to all types of process data in TRDP communication. This pattern operates under the following protocol behavior: publishers prepare process data cyclically and submit it to the TRDP layer, which transmits data only after verifying locally stored topography counters. Subscribers subscribe using ComID and destination IP address, initiating timeout supervision upon subscription. This supervision restarts with each valid data reception. The subscriber TRDP layer must validate received topography counters, and data remains marked as invalid until the first valid telegram matching filter criteria is received. The interaction sequences defined in Figures A.13 and A.14 govern the allowed service sequences for this pattern.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern\"\nRule: The PD push pattern can be used for any process data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)",
    "sentence": "A publisher shall publish PD-PDU(data) when: the defined time cycle terminates (push pattern, TRDP triggered cycle); the publisher receives an application request to send the data immediately (push pattern, application triggered); the publisher receives a request from a dedicated subscriber or an independent communication entity.",
    "enhanced_sentence": "A publisher shall initiate transmission of a PD-PDU(data) under the following conditions: (1) when the configured periodic time cycle completes, implementing the push pattern with TRDP-triggered cyclic operation; (2) upon receiving an explicit application-layer request for immediate data transmission, implementing the push pattern with application-triggered operation; or (3) when receiving a specific request from a dedicated subscriber or independent communication entity. This rule governs the fundamental transmission triggers for process data distribution in the TRDP protocol flow. The expected outcome is timely PD-PDU transmission according to the specified trigger mechanism, with publishers required to implement rate limitation for TRDP-triggered push operations to prevent subscriber overload. Prerequisites include proper publisher state initialization per the state diagram in Figure A.16 and configuration of appropriate time cycles. Application-triggered cyclic operations should be restricted due to the absence of built-in rate control mechanisms.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.1 Publishing PD-PDU(data)\"\nRule: A publisher shall publish PD-PDU(data) when: the defined time cycle terminates (push pattern, TRDP triggered cycle); the publisher receives an application request to send the data immediately (push pattern, application triggered); the publisher receives a request from a dedicated subscriber or an independent communication entity.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern",
    "sentence": "In Figure A.13 process data are prepared cyclically by the publisher and shall be given to the TRDP layer.",
    "enhanced_sentence": "In the PD Push Pattern defined by Figure A.13, process data must be prepared cyclically by the publisher application and subsequently transferred to the TRDP protocol layer for transmission. This rule applies during the publisher's data preparation phase, where the application generates process data at regular intervals according to its operational cycle. The expected outcome is that the TRDP layer receives the prepared data for further protocol processing, including topography counter validation and eventual transmission to subscribers. This rule applies specifically to the PD Push Pattern and requires that the publisher application maintains a cyclic data preparation schedule as defined in the protocol sequence.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern\"\nRule: In Figure A.13 process data are prepared cyclically by the publisher and shall be given to the TRDP layer.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern",
    "sentence": "Any subscriber can subscribe for the process telegram using ComID and destination IP address.",
    "enhanced_sentence": "In the PD Push pattern, any subscriber can subscribe to receive process data telegrams by specifying the ComID and destination IP address as filter criteria. This subscription must occur before the subscriber TRDP layer can begin timeout supervision for expected telegrams. The subscriber TRDP layer will then monitor for incoming telegrams matching these criteria, validate them against topography counters upon receipt, and mark data as invalid until the first valid telegram matching the subscription parameters is received.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern\"\nRule: Any subscriber can subscribe for the process telegram using ComID and destination IP address.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.3 Receiving PD-PDU (PD reply/data)",
    "sentence": "For an eventually related PD request see Figure A.17.",
    "enhanced_sentence": "When processing a PD reply or data PDU, if there is an eventually related PD request that initiated this communication exchange, refer to Figure A.17 for the complete state transition diagram and protocol flow. This reference applies specifically to understanding how received PD replies correlate with previously sent requests, including timeout handling, sequence validation, and state transitions between request transmission and reply reception phases. The figure illustrates the complete lifecycle from request initiation through reply processing, including error conditions and recovery mechanisms.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> A.6.8.3 Receiving PD-PDU (PD reply/data)\"\nRule: For an eventually related PD request see Figure A.17.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.5 PD Redundancy Handling",
    "sentence": "The sequence chart in Figure A.15 shows the sequence of the service primitives for redundancy handling The service primitives for redundancy handling shall be used in the same way by the publisher and subscriber If a redundant function enters the redundancy leader state, it shall call PD.setRed(LEADER) for all relevant process data If a redundant function enters the redundancy follower state, it shall call PD.setRed(!LEADER) for all relevant process data When starting TRDP, publishers of redundant process data (identified by a ComId marked as redundant) shall initialize the redundancy handling The TRDP protocol involves publishers and subscribers exchanging process data telegrams using service primitives such as PD.indicate(data), PD.publish, PD.indicate(timeout), PD.subscribe, PD.putData, and PD.poll",
    "enhanced_sentence": "This rule governs the redundancy state management behavior in TRDP process data communication, specifically defining how publishers and subscribers coordinate their roles during redundancy state transitions. The rule applies when redundant functions change between leader and follower states, as well as during TRDP initialization for publishers handling redundant process data. When a redundant function transitions to the leader state, it must invoke PD.setRed(LEADER) for all associated process data, while transitions to the follower state require PD.setRed(!LEADER). Publishers must initialize redundancy handling during TRDP startup for all process data identified by redundant ComIds. The expected outcome is proper synchronization between redundant components, ensuring that only the leader actively publishes data while followers remain passive. Prerequisites include proper configuration of redundant ComIds and implementation of the redundancy state machine as specified in the TRDP protocol. Both publishers and subscribers must consistently apply the same service primitive sequences as depicted in Figure A.15, using standard TRDP primitives such as PD.indicate, PD.publish, PD.subscribe, PD.putData, and PD.poll for data exchange.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.5 PD Redundancy Handling\"\nRule: The sequence chart in Figure A.15 shows the sequence of the service primitives for redundancy handling The service primitives for redundancy handling shall be used in the same way by the publisher and subscriber If a redundant function enters the redundancy leader state, it shall call PD.setRed(LEADER) for all relevant process data If a redundant function enters the redundancy follower state, it shall call PD.setRed(!LEADER) for all relevant process data When starting TRDP, publishers of redundant process data (identified by a ComId marked as redundant) shall initialize the redundancy handling The TRDP protocol involves publishers and subscribers exchanging process data telegrams using service primitives such as PD.indicate(data), PD.publish, PD.indicate(timeout), PD.subscribe, PD.putData, and PD.poll\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.13 芒聙聯 PD requester state diagram 芒聙聯 states",
    "sentence": "Sending of the request telegram is triggered by the application using PD.request.",
    "enhanced_sentence": "The transmission of a PD request telegram is initiated when the application explicitly calls the PD.request function, transitioning the requester from an idle state to an active transmission state. This rule applies during the protocol's data exchange initiation phase and requires that the requester has valid configuration parameters and network connectivity established. The expected outcome is the proper formatting and dispatch of a request telegram according to TRDP specifications, enabling subsequent data communication with PD responders.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.13 芒聙聯 PD requester state diagram 芒聙聯 states\"\nRule: Sending of the request telegram is triggered by the application using PD.request.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern",
    "sentence": "Timeout supervision at subscriber TRDP layer shall be restarted after receiving the related process data.",
    "enhanced_sentence": "In the TRDP PD Push pattern, when a subscriber has successfully subscribed to a process data telegram using ComID and destination IP address, and timeout supervision has been initiated, the subscriber TRDP layer must restart the timeout supervision timer upon receiving each valid process data telegram that matches the subscription criteria. This applies specifically after the subscriber TRDP layer has verified the topography counters of the received telegram and confirmed its validity. The expected outcome is continuous monitoring of data flow continuity, where the timeout supervision remains active but resets with each valid data reception, ensuring timely detection of communication failures while preventing false timeout triggers during normal data exchange.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.4 Interaction sequence 芒聙聯 PD Push Pattern\"\nRule: Timeout supervision at subscriber TRDP layer shall be restarted after receiving the related process data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.17 芒聙聯 PD subscriber state diagram 芒聙聯 states",
    "sentence": "States Description: WaitForPD state waits until a new process telegram is received",
    "enhanced_sentence": "The WaitForPD state is a subscriber state in the TRDP process data protocol where the subscriber remains idle, actively monitoring for incoming process telegrams. This state applies after initial configuration and connection establishment when no current process data is available. The subscriber must remain in this state until a valid process telegram matching its configured parameters is received, at which point it transitions to the DataValid state and processes the telegram contents. Prerequisites include successful completion of the initial protocol handshake, proper network configuration, and valid subscription parameters.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.17 芒聙聯 PD subscriber state diagram 芒聙聯 states\"\nRule: States Description: WaitForPD state waits until a new process telegram is received\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.12 芒聙聯 PD requester state diagram 芒聙聯 actions",
    "sentence": "Time equals rxTime, which is the timeout value given in the PD.subscribe service primitive.",
    "enhanced_sentence": "When the PD requester state machine transitions to the \"Prepare Request\" state, the action `prepareRequestTelegram` shall be executed to generate a request telegram for one or multiple publishers. During this action, the Time parameter shall be set equal to rxTime, where rxTime represents the timeout value specified in the PD.subscribe service primitive. This timeout governs the maximum allowable response time from publishers and must be initialized prior to entering this state through a valid PD.subscribe invocation. The expected outcome is a properly formatted request telegram containing the configured timeout value, enabling subsequent timeout monitoring during the communication cycle.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.12 芒聙聯 PD requester state diagram 芒聙聯 actions\"\nRule: Time equals rxTime, which is the timeout value given in the PD.subscribe service primitive.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.13 芒聙聯 PD requester state diagram 芒聙聯 states",
    "sentence": "IEC PD.request Request Start IEC CD 61375-2-3 IEC 2024",
    "enhanced_sentence": "The PD.request state is initiated when the application triggers a request telegram transmission, as defined in IEC 61375-2-3:2024. This rule governs the start of the PD requester state machine, where the requester transitions to the \"Request\" state and begins sending request telegrams to the responder. The expected outcome is the successful initiation of the request cycle, enabling subsequent data exchange. This applies when the application requires process data and invokes the PD.request function, provided the protocol stack is properly initialized and no prior communication errors are pending.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.13 芒聙聯 PD requester state diagram 芒聙聯 states\"\nRule: IEC PD.request Request Start IEC CD 61375-2-3 IEC 2024\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters",
    "sentence": "sequenceCounter The sequence counter: Shall be managed for sending process telegrams, shall be managed (stored) for received process telegrams, shall be incremented with each sending of the process telegram, and can be used for communication layer surveillance to verify that the application is still updating its process data.",
    "enhanced_sentence": "The sequenceCounter parameter in PD-PDUs shall be actively managed by both sending and receiving entities. For outgoing process telegrams, the sender shall maintain and increment this counter with each transmission. For incoming telegrams, the receiver shall store the received sequence counter value. This mechanism enables communication layer surveillance to detect application liveliness by verifying that process data is being regularly updated. The sequence counter applies to all process data exchanges and provides a means to monitor data freshness and communication continuity between TRDP devices.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters\"\nRule: sequenceCounter The sequence counter: Shall be managed for sending process telegrams, shall be managed (stored) for received process telegrams, shall be incremented with each sending of the process telegram, and can be used for communication layer surveillance to verify that the application is still updating its process data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.14 芒聙聯 PD subscriber state diagram 芒聙聯 triggers",
    "sentence": "Triggers Description: PD.subscribe service primitive called by application to continue receiving train-wide published process data.",
    "enhanced_sentence": "The PD.subscribe service primitive is invoked by the application layer to maintain continuous reception of train-wide published process data following a topology count change (e.g., when the train configuration is modified). This trigger applies during the PD subscriber state transitions when the application needs to resume or persist process data subscription after a network topology update. The expected outcome is the re-establishment of process data flow from publishers, ensuring the subscriber receives updated data reflecting the new topology. Prerequisites include successful prior subscription initialization and valid network connectivity, with the topology change counter value (e.g., 3950) being properly acknowledged by the subscriber.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.14 芒聙聯 PD subscriber state diagram 芒聙聯 triggers\"\nRule: Triggers Description: PD.subscribe service primitive called by application to continue receiving train-wide published process data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters",
    "sentence": "comId Identifier of the user dataset.",
    "enhanced_sentence": "comId (Communication Identifier) uniquely identifies the user dataset within the PD-PDU. This identifier applies during PD-PDU composition and processing, where it serves as the primary addressing mechanism for process data exchange between train devices. The comId must be explicitly set by the user application and shall be used for train addressing as defined in IEC 61375-2-3. When followed, this enables proper routing and association of process data telegrams with their intended destinations and applications. The prerequisite is that the user application has defined the appropriate communication relationships and addressing scheme according to the train network configuration.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters\"\nRule: comId Identifier of the user dataset.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters",
    "sentence": "Shall be the primary information about the user data.",
    "enhanced_sentence": "The datasetLength parameter shall contain the exact number of octets of user data payload, excluding any padding octets, and shall serve as the primary reference for determining the actual size and boundaries of the user data within the PD-PDU. This parameter must be accurately computed and set by the sender to ensure proper parsing and processing by the receiver, particularly when handling variable-length datasets. In cases where fixed-size datasets are used, this parameter may be redundant but must still be provided for protocol consistency. The value shall be within the range of 0 to 1432 octets as defined by the protocol constraints.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters\"\nRule: Shall be the primary information about the user data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters",
    "sentence": "If the reply is 0, the reply shall be sent as an unspecified PDU.",
    "enhanced_sentence": "When processing a PD request, if the value of the reply field is set to 0, the responding device shall transmit the reply using an unspecified PDU type. This rule applies specifically to the reply handling mechanism in PD request-response scenarios and ensures proper protocol behavior when no specific reply type is designated. The expected outcome is that the reply will be transmitted without a defined message type, maintaining protocol compliance while allowing for flexible response handling. This condition applies only when the device is responding to a PD request and the reply parameter value explicitly equals 0.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters\"\nRule: If the reply is 0, the reply shall be sent as an unspecified PDU.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters",
    "sentence": "Shall be used only in a PD request.",
    "enhanced_sentence": "The reserved field in the PD-PDU shall be set to 0 and used exclusively in PD request messages; it must not be utilized in PD reply messages or any other PD-PDU types. When this field is present in a PD request, it serves as reserved space for future protocol extensions while maintaining current compatibility. If a PD reply is required and the reply content is empty (0), the response shall be transmitted as an unspecified PDU rather than repurposing the reserved field. This ensures proper protocol version management and forward compatibility while preventing misuse of reserved protocol space.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters\"\nRule: Shall be used only in a PD request.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters",
    "sentence": "dataset The user data.",
    "enhanced_sentence": "**dataset** The user data payload containing process information to be transmitted. This parameter applies when constructing or parsing PD-PDUs during process data exchange between TRDP devices. The dataset must be set by the application layer before transmission and shall be interpreted according to the comId-specific data definition. The actual content length must match the datasetLength parameter (0-1432 octets), excluding any padding. When receiving, the dataset contains the extracted user data for application processing.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters\"\nRule: dataset The user data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters",
    "sentence": "replyIpAddress The reply IP address for PD: shall be used for the reply.",
    "enhanced_sentence": "The replyIpAddress parameter specifies the destination IP address for PD-PDU replies. This field shall be populated by the sending application and used by the receiving device to direct response telegrams back to the originating source. The rule applies when generating PD-PDU request messages that require a reply, ensuring that responses are correctly routed to the requesting device's network interface. When followed, this enables bidirectional communication by providing the necessary addressing information for reply PDUs. This parameter is mandatory for PD requests and shall be set by the user application prior to transmission.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.5 PD-PDU -> Table A.3 芒聙聯 PD-PDU parameters\"\nRule: replyIpAddress The reply IP address for PD: shall be used for the reply.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.3 Interaction sequence 芒聙聯 PD Pull Pattern",
    "sentence": "Also, a request for already cyclically published PDU shall be possible.",
    "enhanced_sentence": "In the PD Pull Pattern, while the publisher cyclically prepares and publishes process data, it must also support on-demand requests for these same PDUs. This capability allows subscribers to explicitly request the most current data at any time, independent of the regular publication cycle. The publisher's TRDP layer must respond to such requests using the latest available cyclically published data, provided the publisher has subscribed for requests and the incoming request matches its filter criteria. Topology counters in the request must be validated according to A.6.7 before processing, and the response must be sent to the request's source IP address if the reply IP address is 0.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> A.6.6.3 Interaction sequence 芒聙聯 PD Pull Pattern\"\nRule: Also, a request for already cyclically published PDU shall be possible.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.16 芒聙聯 PD subscriber state diagram 芒聙聯 actions",
    "sentence": "setDataInvalid - Sets the process data to initialized/invalid time equal to rxTime (timeout value given in PD.subscribe service primitive).",
    "enhanced_sentence": "setDataInvalid - When a PD subscriber receives a process data telegram that fails validation or encounters a timeout condition (where rxTime equals the timeout value specified in the PD.subscribe service primitive), this action sets the process data state to initialized/invalid. This marks the data as unreliable for application use while maintaining the subscriber's operational state, ensuring the application is aware of data quality issues without disrupting the communication session. The rule applies specifically during data reception processing when validity checks fail or timeout conditions are met, and requires that a valid timeout value was previously configured during the subscription setup.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.16 芒聙聯 PD subscriber state diagram 芒聙聯 actions\"\nRule: setDataInvalid - Sets the process data to initialized/invalid time equal to rxTime (timeout value given in PD.subscribe service primitive).\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.15 芒聙聯 PD subscriber state diagram 芒聙聯 guards",
    "sentence": "Guards Description: The configured communication pattern for the PD-PDU exchange.",
    "enhanced_sentence": "Guards Description: The configured communication pattern (PUSH or PULL) for the PD-PDU exchange determines state transitions in the PD subscriber state machine. This rule applies when processing incoming telegrams during protocol operation, specifically when the subscriber is in states such as subscribe, WaitForPD, unsubscribe, or pdReceived. The expected outcome is that the subscriber evaluates the communication pattern against the received telegram's topography counters as per IEC CD 61375-2-3, triggering appropriate transitions based on [OK], [else], [pattern == PUSH], or [pattern == PULL] conditions. Prerequisites include proper configuration of the communication pattern and valid telegram reception with compliant topography counters.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.8 State Machine -> Table A.15 芒聙聯 PD subscriber state diagram 芒聙聯 guards\"\nRule: Guards Description: The configured communication pattern for the PD-PDU exchange.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Figure A.20 芒聙聯 MD-PDU",
    "sentence": "MD_PDU is defined as a record containing request",
    "enhanced_sentence": "MD_PDU (Message Data Protocol Data Unit) is defined as a structured record format that encapsulates request data in the TRDP v2 protocol. This rule applies during the message composition phase when a device needs to initiate communication by sending a request to another network entity. The expected outcome is a properly formatted MD-PDU containing all necessary request elements as specified in the protocol, including header information and payload data. Prerequisites include valid session establishment and adherence to the MD-PDU structure defined in Figure A.20, ensuring interoperability between TRDP-compliant devices.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Figure A.20 芒聙聯 MD-PDU\"\nRule: MD_PDU is defined as a record containing request\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.22 芒聙聯 MD caller state diagram 芒聙聯 triggers",
    "sentence": "Triggers Description: MD.request User called MD.request service primitive change of topography counters.",
    "enhanced_sentence": "This trigger governs the initiation of MD (Message Data) protocol communication when the user application calls the MD.request service primitive. It applies specifically when there is a change in the topography counters, which indicates modifications to the train's topological configuration. The rule requires that the MD protocol state machine is in a valid state to process service requests and that the topography counter change has been properly detected. When triggered, the expected outcome is the generation and transmission of an MD protocol message containing the updated topography information to ensure all receiving nodes maintain synchronized topological awareness of the train configuration.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.22 芒聙聯 MD caller state diagram 芒聙聯 triggers\"\nRule: Triggers Description: MD.request User called MD.request service primitive change of topography counters.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU",
    "sentence": "The structure of a MD-PDU is defined in Figure A.20 and subsequently in ASN.1 notation.",
    "enhanced_sentence": "The structure of a Message Data Protocol Data Unit (MD-PDU) is formally defined in Figure A.20 and further specified using Abstract Syntax Notation One (ASN.1) notation. This rule applies during the encoding and decoding of MD-PDUs in TRDP v2 communication, ensuring consistent message format interpretation between communicating entities. Developers must reference both the visual representation in Figure A.20 and the corresponding ASN.1 schema when implementing MD-PDU serialization/deserialization logic. The expected outcome is unambiguous message structure definition enabling interoperable data exchange between TRDP-compliant devices. This structural definition serves as a prerequisite for all MD-PDU processing operations in the protocol stack.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU\"\nRule: The structure of a MD-PDU is defined in Figure A.20 and subsequently in ASN.1 notation.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> A.7.6.3 Filtering rules",
    "sentence": "f) MD telegrams with empty destinationUri may be received by several listeners with different filter parameters.",
    "enhanced_sentence": "f) When an MD telegram contains an empty destinationUri field, it may be received by multiple listeners even if those listeners have different filter parameters (comId, sourceUri, or destinationUri). This exception applies specifically to telegrams with empty destinationUri and overrides the general requirement that listeners must have disjunctive filter sets. This behavior enables flexible reception of multicast-like messages by multiple subscribers with distinct filtering criteria.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> A.7.6.3 Filtering rules\"\nRule: f) MD telegrams with empty destinationUri may be received by several listeners with different filter parameters.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> A.7.6.3 Filtering rules",
    "sentence": "a) An empty destinationUri in MD telegrams shall be received by a listener regardless of any defined destinationUri.",
    "enhanced_sentence": "When using the MD.addListener service primitive to register a listener with optional sourceUri and destinationUri filter parameters, if an incoming MD telegram contains an empty destinationUri field, the listener shall accept and process this telegram regardless of any destinationUri filter value specified during listener registration. This rule ensures that telegrams with empty destinationUri (which may represent potential multicast messages) are not filtered out by destination-based filtering mechanisms, allowing proper handling of broadcast-style communications within the TRDP protocol.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> A.7.6.3 Filtering rules\"\nRule: a) An empty destinationUri in MD telegrams shall be received by a listener regardless of any defined destinationUri.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.7 Topography counter check",
    "sentence": "Before sending a telegram, the topography counters of the telegram shall be checked against the expected values After reception of a telegram, the topography counter values shall be checked to ensure that they match the expected values The TRDP protocol involves a caller and replier (listener) using message types including MD.request, MD.addListener for request messages, MD.reply for reply messages, MD.indicate, MD.confirm for confirm messages, and MD.release as defined in IEC CD 61375-2-3",
    "enhanced_sentence": "This rule governs the topography counter validation mechanism in TRDP v2 protocol communication between caller and replier entities. The rule applies during two critical protocol phases: (1) immediately before transmitting any telegram (including MD.request, MD.addListener, MD.reply, MD.indicate, MD.confirm, and MD.release message types), and (2) immediately after receiving any telegram. The prerequisite is that both communicating parties must maintain synchronized expected topography counter values according to the protocol state. When followed, the expected outcome is that all transmitted and received telegrams contain valid topography counters, ensuring data integrity and preventing processing of outdated or invalid messages. If counter validation fails, the telegram must be discarded and appropriate error handling procedures initiated as specified in the protocol.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.7 Topography counter check\"\nRule: Before sending a telegram, the topography counters of the telegram shall be checked against the expected values After reception of a telegram, the topography counter values shall be checked to ensure that they match the expected values The TRDP protocol involves a caller and replier (listener) using message types including MD.request, MD.addListener for request messages, MD.reply for reply messages, MD.indicate, MD.confirm for confirm messages, and MD.release as defined in IEC CD 61375-2-3\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.23 芒聙聯 MD caller state diagram 芒聙聯 guards",
    "sentence": "The composite state caller processes MD.request through mdCallSession when sendType equals Mr, enters StateWaitForReply when sendType equals Mn, and leaves when missingReplies equals 0 AND missingConfirms equals 0.",
    "enhanced_sentence": "This rule governs the MD protocol state machine behavior for processing MD.request service primitives based on the sendType parameter. The rule applies when the caller composite state receives an MD.request with a valid sendType parameter that matches one of the defined cases in Table A.21. When sendType equals Mr (multicast with reply), the request is processed through the mdCallSession procedure. When sendType equals Mn (multicast with no reply), the state machine transitions to StateWaitForReply. The caller state exits when both missingReplies and missingConfirms counters reach zero, indicating all expected responses and confirmations have been received. This ensures proper state transitions based on the communication pattern specified in the MD.request, maintaining protocol synchronization between communicating entities.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.23 芒聙聯 MD caller state diagram 芒聙聯 guards\"\nRule: The composite state caller processes MD.request through mdCallSession when sendType equals Mr, enters StateWaitForReply when sendType equals Mn, and leaves when missingReplies equals 0 AND missingConfirms equals 0.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.23 芒聙聯 MD caller state diagram 芒聙聯 guards",
    "sentence": "The state machine starts from the caller state, processes MD.confirm when mpReceived occurs, restarts with mdHandleCallerTimeout when maxTimeoutCnt does not equal 0, and otherwise processes meReceived to closeCallSession.",
    "enhanced_sentence": "This rule governs the MD protocol state machine behavior for the caller entity after initiating an MD session. The state machine begins in the caller state and handles three possible scenarios: (1) When an mpReceived event occurs (indicating receipt of a valid MD reply), it processes MD.confirm to complete the data exchange. (2) If maxTimeoutCnt ≠ 0 (timeout retries remain), it restarts the session via mdHandleCallerTimeout. (3) Otherwise (when maxTimeoutCnt = 0 and no valid reply received), it processes meReceived to terminate the session via closeCallSession. This rule applies specifically during the StateWaitForReply phase after successful MD.request processing, ensuring proper timeout management and session cleanup according to TRDP v2 reliability requirements.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.23 芒聙聯 MD caller state diagram 芒聙聯 guards\"\nRule: The state machine starts from the caller state, processes MD.confirm when mpReceived occurs, restarts with mdHandleCallerTimeout when maxTimeoutCnt does not equal 0, and otherwise processes meReceived to closeCallSession.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.23 芒聙聯 MD caller state diagram 芒聙聯 guards",
    "sentence": "The guards description defines the sendType parameter of the MD request telegram as requested by the user in the MD.request service primitive.",
    "enhanced_sentence": "The guards description defines the sendType parameter of the MD request telegram as requested by the user in the MD.request service primitive, governing how the MD protocol state machine processes different communication patterns. This rule applies during MD session initiation when the caller prepares to send a request, requiring that the sendType parameter, NoOfRepliers length, and topography counter collectively match at least one valid configuration from Table A.21. When followed correctly, the state machine appropriately routes the request: processing MD.request through mdCallSession for Mr type, transitioning to StateWaitForReply for Mn type, and only terminating the session when all expected replies and confirms are received (missingReplies = 0 AND missingConfirms = 0). Prerequisites include valid state machine initialization from the caller state and proper handling of subsequent events (MD.confirm, timeouts, and topology verification) to ensure protocol compliance.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.23 芒聙聯 MD caller state diagram 芒聙聯 guards\"\nRule: The guards description defines the sendType parameter of the MD request telegram as requested by the user in the MD.request service primitive.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> Table A.19 芒聙聯 TRDP service primitives 芒聙聯 Caller",
    "sentence": "MD.indicate service primitive parameters include: userReference which was submitted with MD.request for reception of a query message (Mq), comId as defined in Table A.18 (set to 0 if unknown for error return), and userStatus for user status or error code.",
    "enhanced_sentence": "The MD.indicate service primitive is used by the TRDP layer to deliver received query messages (Mq) to the application layer. This primitive applies when a query message is successfully received and processed, and its parameters must include: userReference (which matches the value originally submitted with the corresponding MD.request for query message reception), comId (as specified in Table A.18, but set to 0 if the communication identifier cannot be determined during error conditions), and userStatus (which conveys either application-specific status information or error codes). The prerequisite for this indication is that a valid query message has been received and matched to an existing MD.request, and the expected outcome is that the application can properly identify and process the incoming query using these parameters.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> Table A.19 芒聙聯 TRDP service primitives 芒聙聯 Caller\"\nRule: MD.indicate service primitive parameters include: userReference which was submitted with MD.request for reception of a query message (Mq), comId as defined in Table A.18 (set to 0 if unknown for error return), and userStatus for user status or error code.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> Table A.19 芒聙聯 TRDP service primitives 芒聙聯 Caller",
    "sentence": "MD.request service primitive parameters include: msgType for sending notification messages (Mn), and userReference which is returned with the MD.indication.",
    "enhanced_sentence": "The MD.request service primitive is used by the TRDP application layer to initiate notification message (Mn) transmission. When invoking MD.request, the caller must specify msgType as Mn to indicate notification messaging, and provide a userReference parameter that will be echoed back in the corresponding MD.indication for correlation. This rule applies during the message initiation phase when the application needs to send unsolicited notifications to one or more destinations. The expected outcome is proper delivery of notification messages with maintained request-response correlation through the userReference parameter. Prerequisites include valid session initialization, proper configuration of transport protocol (UDP/TCP), and correct destination addressing parameters. The userReference must be unique within the session context to ensure reliable message tracking between request and indication primitives.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> Table A.19 芒聙聯 TRDP service primitives 芒聙聯 Caller\"\nRule: MD.request service primitive parameters include: msgType for sending notification messages (Mn), and userReference which is returned with the MD.indication.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.30 芒聙聯 MD receiver state diagram 芒聙聯 triggers",
    "sentence": "Triggers Description: mdMessageReceived - An MD telegram has been received",
    "enhanced_sentence": "Triggers Description: mdMessageReceived - This trigger activates when a valid MD (Message Data) protocol telegram is successfully received and passes all protocol-level validation checks including CRC verification and header consistency. It applies during the MD receiver state machine operation when the receiver is in a state capable of processing incoming MD messages. Upon activation, the receiver must transition to the appropriate processing state to handle the telegram contents according to the MD protocol specification, including payload extraction and application data delivery. Prerequisites include: the receiver must be in an operational state (not in INIT or ERROR states), the network interface must be properly configured, and the received telegram must conform to the TRDP v2 message format requirements.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.30 芒聙聯 MD receiver state diagram 芒聙聯 triggers\"\nRule: Triggers Description: mdMessageReceived - An MD telegram has been received\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters",
    "sentence": "comId: Identifier of the user dataset.",
    "enhanced_sentence": "comId: The Communication Identifier (comId) uniquely identifies the user dataset being transmitted in the MD-PDU. This identifier must be consistent between communicating entities to ensure proper dataset association and processing. The comId applies during message composition and interpretation phases, where it serves as the primary reference for dataset type identification. When correctly implemented, it enables receivers to validate and route datasets to appropriate application handlers. This parameter is mandatory for all MD-PDUs and must be set according to predefined dataset definitions as specified in section A.5 of the protocol specification.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters\"\nRule: comId: Identifier of the user dataset.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters",
    "sentence": "sequenceCounter: The sequence counter shall be incremented with each repetition and shall be returned with the reply message.",
    "enhanced_sentence": "The sequenceCounter parameter in the MD-PDU shall be incremented by one for each repeated transmission of the same message within a session. When a reply message is generated in response to a request, the replier shall copy the sequenceCounter value from the received request into the corresponding field of the reply message. This mechanism enables the caller to correlate requests with their respective replies and detect missing or duplicate messages within the communication session. The sequence counter management applies to all MD-PDU exchanges that require message correlation and is essential for maintaining protocol reliability and message ordering.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters\"\nRule: sequenceCounter: The sequence counter shall be incremented with each repetition and shall be returned with the reply message.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters",
    "sentence": "datasetLength: Length of the user data set in number of octets from 0 to 65388.",
    "enhanced_sentence": "The datasetLength parameter specifies the total size of the user data payload in octets within the MD-PDU message. This value must be calculated after the user dataset is fully assembled and must fall within the valid range of 0 to 65388 octets. When preparing an MD-PDU for transmission, the sender shall set this field to accurately reflect the actual length of the dataset payload. Receivers shall use this value to correctly parse and extract the user data from the message. This parameter applies to all MD-PDU messages containing user datasets and must be consistent with the actual data content; mismatches between declared length and actual data size constitute protocol violations.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters\"\nRule: datasetLength: Length of the user data set in number of octets from 0 to 65388.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters",
    "sentence": "dataset: The user data.",
    "enhanced_sentence": "dataset: Contains the actual user payload data being transmitted. This field carries the application-specific information that the protocol is transporting between source and destination URIs. The dataset content is opaque to the TRDP protocol layer and is interpreted by the application layer. The length of this data is specified by the datasetLength parameter, which must accurately reflect the number of octets in the dataset field. The dataset is transmitted after all other MD-PDU header parameters and before any trailing FCS fields.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.5 MD-PDU -> Table A.18 芒聙聯 MD-PDU parameters\"\nRule: dataset: The user data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> Table A.20 芒聙聯 TRDP service primitives 芒聙聯 Replier",
    "sentence": "MD.readdListener service primitive parameters include Handle for this listener, etbTopoCnt actual value, opTrnTopoCnt actual value, sourceIpAddress IP source address generated from respective URIs, sourceIpAddress2 defining the upper IP address in case of an IP address range, and destinationIpAddress IP destination address generated from respective URIs.",
    "enhanced_sentence": "The MD.readdListener service primitive is used to re-establish a previously configured listener with updated topology counters, applying when the application needs to refresh a listener configuration after topology changes (e.g., train configuration updates). This primitive must be invoked only for existing valid listener handles previously returned by MD.addListener. Required parameters include: Handle identifying the listener to be updated; etbTopoCnt and opTrnTopoCnt actual values reflecting current topology state; sourceIpAddress and sourceIpAddress2 defining the source IP address range (where sourceIpAddress2 specifies the upper bound); and destinationIpAddress specifying the target IP address, all generated from their respective URIs. When properly executed, the TRDP layer will resume message reception using the updated topology counters and address parameters, ensuring continued proper message routing and filtering according to the current network topology.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.6 Interaction between application and TRDP layer -> Table A.20 芒聙聯 TRDP service primitives 芒聙聯 Replier\"\nRule: MD.readdListener service primitive parameters include Handle for this listener, etbTopoCnt actual value, opTrnTopoCnt actual value, sourceIpAddress IP source address generated from respective URIs, sourceIpAddress2 defining the upper IP address in case of an IP address range, and destinationIpAddress IP destination address generated from respective URIs.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives",
    "sentence": "Set to 0 for application triggered Process Data datasetLength Actual user data length to be sent dataset Buffer with user data to be sent as redId Redundancy group ID.",
    "enhanced_sentence": "When the application triggers Process Data transmission, set the datasetLength parameter to the actual length of user data to be sent, and provide the dataset buffer containing the user data. The redId parameter specifies the redundancy group ID for the transmission. This rule applies during the PD.publish service primitive when the application initiates Process Data sending, ensuring proper data length specification and redundancy group identification for reliable protocol operation.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives\"\nRule: Set to 0 for application triggered Process Data datasetLength Actual user data length to be sent dataset Buffer with user data to be sent as redId Redundancy group ID.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.26 芒聙聯 MD replier state diagram 芒聙聯 triggers",
    "sentence": "The MD replier state diagram triggers include: MD.addListener user called service primitive, reply timeout, message type equals Mr with exists true filtering for listener, message type equals Mr with exists false starting mdHandleRequest, message type equals Mr with exists true indicating data, message type equals Mr with exists false, reply type equals Mp, reply type equals Mq with entry indicating data, MD.reply leaving StateWaitForConfirm, opening reply session, mcReceived indicating data and leaving, timeout leaving, exit releasing data or timeout or abort, starting mdReplySession, CompositeStateReplier MD.addListener adding listener, starting replier with state equals StateWaitForConfirm or else condition, repeated equals true discarding message, mdAbort equals true or else condition, and IEC CD 61375-2-3 © IEC 2024 reference.",
    "enhanced_sentence": "The MD replier state diagram triggers govern the behavior of the TRDP Message Data replier component in response to various protocol events and service primitives. These triggers apply during the MD protocol state transitions and dictate how the replier processes incoming messages, manages sessions, and handles timeouts. \n\nKey triggers include: MD.addListener service primitive invocation for registering listeners; reply timeout events; processing of Mr message types with exists=true/false conditions for listener filtering and request handling; Mp and Mq reply types with data indication; session management operations (opening reply sessions, starting mdReplySession); state transitions (leaving StateWaitForConfirm, exiting with data release/timeout/abort); and error conditions (repeated message discarding, mdAbort conditions). \n\nExpected outcomes include proper listener registration, appropriate message filtering, correct session state transitions, timely data delivery, and graceful error recovery. Prerequisites include valid MD protocol initialization and proper message format compliance as specified in IEC 61375-2-3. All triggers must be processed according to the state machine logic to maintain protocol compliance and ensure reliable train communication.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Table A.26 芒聙聯 MD replier state diagram 芒聙聯 triggers\"\nRule: The MD replier state diagram triggers include: MD.addListener user called service primitive, reply timeout, message type equals Mr with exists true filtering for listener, message type equals Mr with exists false starting mdHandleRequest, message type equals Mr with exists true indicating data, message type equals Mr with exists false, reply type equals Mp, reply type equals Mq with entry indicating data, MD.reply leaving StateWaitForConfirm, opening reply session, mcReceived indicating data and leaving, timeout leaving, exit releasing data or timeout or abort, starting mdReplySession, CompositeStateReplier MD.addListener adding listener, starting replier with state equals StateWaitForConfirm or else condition, repeated equals true discarding message, mdAbort equals true or else condition, and IEC CD 61375-2-3 © IEC 2024 reference.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Figure A.24 芒聙聯 TRDP Layer MD telegram reception",
    "sentence": "The IEC CompositeStateReceiver processes mdMessageReceived and mdHandleReceived when exists equals TRUE.",
    "enhanced_sentence": "The IEC CompositeStateReceiver shall process incoming MD telegrams by handling both the mdMessageReceived and mdHandleReceived events when the 'exists' parameter equals TRUE. This processing occurs during the MD telegram reception state and includes validation of the message header against defined types (Mp, Mq, Mc, Mn, Mr). If the message type matches Me and 'exists' remains TRUE, the receiver shall proceed according to the specific handling procedures defined in IEC CD 61375-2-3:2024. Messages with unrecognized types shall be discarded. This rule ensures proper state transitions and protocol compliance during real-time data exchange operations.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> Figure A.24 芒聙聯 TRDP Layer MD telegram reception\"\nRule: The IEC CompositeStateReceiver processes mdMessageReceived and mdHandleReceived when exists equals TRUE.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives",
    "sentence": "Set to 0 reserved as defined in Table A.3 sourceIpAddress Source IP Address of the PD.",
    "enhanced_sentence": "When initializing the sourceIpAddress parameter in PD.publish, PD.rePublish, or PD.request service primitives, the field must be set to 0 if the application does not require explicit source address specification. This reserved value indicates that the TRDP protocol layer should automatically determine and use the appropriate source IP address based on the system's network configuration and routing tables. This rule applies during the initialization phase before transmitting Process Data, ensuring proper protocol operation while allowing flexibility for applications that don't require manual source address management. The value 0 must be used exclusively for this purpose as defined in Table A.3, and any non-zero value should represent a valid, configured IP address when explicit source addressing is required.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives\"\nRule: Set to 0 reserved as defined in Table A.3 sourceIpAddress Source IP Address of the PD.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.1 TRDP Layer 芒聙聯 Caller",
    "sentence": "A confirmation message shall not contain user data and shall be sent only as unicast.",
    "enhanced_sentence": "When a TRDP user (caller) provides confirmation during a request-reply/request-reply-confirm session, the TRDP layer shall send a confirmation message. This confirmation message must be sent as unicast to the specific destination URI obtained from the source URI in the reply message, and it shall not contain any user data payload. This rule applies specifically to the confirmation phase of the protocol flow after all expected replies have been received and the caller has provided confirmation, ensuring that confirmations are targeted acknowledgments without data content.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.1 TRDP Layer 芒聙聯 Caller\"\nRule: A confirmation message shall not contain user data and shall be sent only as unicast.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives",
    "sentence": "Set to 0 if PD.rePublish: TRDP user to TRDP layer handle Handle which has been given by the etbTopoCnt as defined in Table A.3 opTrnTopoCnt as defined in Table A.3 sourceIpAddress Source IP Address of the Process Data.",
    "enhanced_sentence": "When the TRDP application layer initiates a PD.rePublish operation to republish Process Data, the handle parameter must be set to 0. This handle refers to the session identifier previously provided by the etbTopoCnt and opTrnTopoCnt topology counters as defined in Table A.3. This rule applies specifically during republishing scenarios where the application is reusing an existing publishing session rather than creating a new one. The expected outcome is proper session management where the protocol layer recognizes this as a republish operation rather than a new publication. Prerequisites include having an active publishing session established through previous PD.publish calls, and the source IP address must be properly configured to identify the Process Data source.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives\"\nRule: Set to 0 if PD.rePublish: TRDP user to TRDP layer handle Handle which has been given by the etbTopoCnt as defined in Table A.3 opTrnTopoCnt as defined in Table A.3 sourceIpAddress Source IP Address of the Process Data.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives",
    "sentence": "destinationIpAddress Destination IP address to send the PD.unPublish: TRDP user to TRDP layer handle Handle which has been given by the PD.putData: TRDP user to TRDP layer handle Handle which has been given by the datasetLength Actual user data length to be sent dataset Buffer with user data to be sent as PD.setRed: TRDP user to TRDP layer redId Selects the redundancy group to be leader If TRUE, the service activates PD.getRed: TRDP user to TRDP layer redId Selects the redundancy group to be leader If TRUE, publishing is activated for PD.putDataImmediate: TRDP user to TRDP layer handle Handle which has been given by the txTime Absolute time to transmit or 0 for datasetLength Actual user data length to be sent dataset Buffer with user data to be sent as Requester PD.request: TRDP user to TRDP layer handle handle for this subscription of the reserved as defined in Table A.3 comId ComId to be sent, as defined in etbTopoCnt as defined in Table A.3 sourceIpAddress Source IP address destinationIpAddress Destination IP address to send the redId Redundancy ID.",
    "enhanced_sentence": "The destinationIpAddress parameter specifies the target IP address for sending Process Data (PD) messages in TRDP communications. This parameter applies when the application layer initiates PD service primitives including PD.publish, PD.rePublish, PD.putData, PD.putDataImmediate, and PD.request operations. The expected outcome is that the TRDP protocol layer will correctly route the PD message to the specified destination address. Prerequisites include: a valid handle returned from previous TRDP operations, proper initialization of the TRDP stack, and correct configuration of network interfaces. When set to 0, the system uses application-triggered Process Data routing. For redundancy-aware operations, the redId parameter must be properly configured to select the appropriate redundancy group, and the sourceIpAddress must be valid for the sending interface.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives\"\nRule: destinationIpAddress Destination IP address to send the PD.unPublish: TRDP user to TRDP layer handle Handle which has been given by the PD.putData: TRDP user to TRDP layer handle Handle which has been given by the datasetLength Actual user data length to be sent dataset Buffer with user data to be sent as PD.setRed: TRDP user to TRDP layer redId Selects the redundancy group to be leader If TRUE, the service activates PD.getRed: TRDP user to TRDP layer redId Selects the redundancy group to be leader If TRUE, publishing is activated for PD.putDataImmediate: TRDP user to TRDP layer handle Handle which has been given by the txTime Absolute time to transmit or 0 for datasetLength Actual user data length to be sent dataset Buffer with user data to be sent as Requester PD.request: TRDP user to TRDP layer handle handle for this subscription of the reserved as defined in Table A.3 comId ComId to be sent, as defined in etbTopoCnt as defined in Table A.3 sourceIpAddress Source IP address destinationIpAddress Destination IP address to send the redId Redundancy ID.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives",
    "sentence": "Set to 0 if dataSet User data set to be sent, as defined datasetLength data set length to be sent, as replyComId as defined in Table A.3 Subscriber PD.subscribe: TRDP user to TRDP layer handle handle for this subscription; userRef Optional user reference for call callBackFunction Optional call back function.",
    "enhanced_sentence": "When initializing a PD.subscribe service primitive from the TRDP user to the TRDP protocol layer, the dataSet parameter must be set to 0 (null) during subscription establishment. This rule applies specifically during the subscription setup phase before any Process Data messages are received. The datasetLength parameter should also be set to 0 at this stage, as no user data is being sent during subscription initialization. The replyComId must be defined according to Table A.3 specifications for the subscriber configuration. This initialization ensures proper subscription handling where the TRDP layer allocates resources and establishes the communication channel, with actual user data reception occurring later through callback functions when Process Data messages arrive from publishers. Prerequisites include valid handle allocation, proper comId configuration per Table A.3, and correct IP address settings for the communication endpoints.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives\"\nRule: Set to 0 if dataSet User data set to be sent, as defined datasetLength data set length to be sent, as replyComId as defined in Table A.3 Subscriber PD.subscribe: TRDP user to TRDP layer handle handle for this subscription; userRef Optional user reference for call callBackFunction Optional call back function.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)",
    "sentence": "The topography counter values obtained in an MD.addListener service primitive shall be used for checking incoming messages.",
    "enhanced_sentence": "When a TRDP user registers as an MD listener via the MD.addListener service primitive, the topography counter values provided during registration must be used to validate all incoming messages. This validation occurs immediately upon message reception, before any further processing. If an incoming message contains topography counter values that do not match those registered by the listener, the message must be discarded. This ensures that messages are only processed when they align with the current train topology configuration, maintaining consistency across dynamic topology changes.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)\"\nRule: The topography counter values obtained in an MD.addListener service primitive shall be used for checking incoming messages.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)",
    "sentence": "After receiving the MD.reply from the TRDP user (listener), the TRDP layer shall send the reply message.",
    "enhanced_sentence": "When the TRDP layer (acting as a replier/listener) has successfully processed a valid request message (MsgType Mr) and established an open reply session, and subsequently receives an MD.reply primitive from the registered TRDP user application (listener), the TRDP layer shall construct and transmit the corresponding reply message. This reply message must be sent as unicast using the listener's source IP address and source URI. The transmission of this reply message completes the response phase of the protocol interaction initiated by the incoming request, and the subsequent handling (closing the session or starting a timeout timer) depends on whether the reply message type requires confirmation (Mq) or not (Mp).",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)\"\nRule: After receiving the MD.reply from the TRDP user (listener), the TRDP layer shall send the reply message.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives",
    "sentence": "sourceIpAddress2 Defines the upper IP address in destinationIpAddress IP destination address, generated timeout Timeout (rxTime) for Process Data to be timeoutBehaviour Optional behaviour in case of a PD_resubscribe: TRDP user to TRDP layer handle handle for this subscription; etbTopoCnt as defined in Table A.3 opTrnTopoCnt as defined in Table A.3 sourceIpAddress1 IP source address, generated out of Defines the lower IP address in sourceIpAddress2 Defines the upper IP address in destinationIpAddress IP destination address, generated PD.unsubscribe: TRDP user to TRDP layer handle handle returned by the TRDP layer PD.indicate: TRDP layer to TRDP user handle handle returned by the TRDP layer sourceIpAddress Received source IP address destinationIpAddress Received destination IP address, as sequenceCounter Received sequence counter, as protocolVersion Received protocol version, as msgType process data (Pd) comId Received ComId, as defined in etbTopoCnt Received topo count, as defined in opTrnTopoCnt Received topo count, as defined in replyIComId Received reply ComId, as defined in replyIpAddress Received reply IP address userRef User reference given in status 0 OK, != 0 NOK 1 timeout 6 no subscription timeoutBehaviour Optional behaviour in case of a reserved as defined in Table A.3 dataset Received user data, as defined in datasetLength Received user data size, as defined PD.get: TRDP user to TRDP layer handle handle returned by the TRDP layer sourceIpAddress Received source IP address destinationIpAddress Received destination IP sequenceCounter Received sequence counter, as protocolVersion Received protocol version, as msgType process data (Pd) comId Received ComId, as defined in etbTopoCnt Received topo count, as defined in opTrnTopoCnt Received topo count, as defined in replyIComId Received reply ComId, as defined in replyIpAddress Received reply IP address userRef User reference given in status 0 OK, != 0 NOK 1 timeout timeoutBehaviour Optional behaviour in case of a reserved as defined in Table A.3 dataset Received user data, as defined in datasetLength Received user data size, as defined",
    "enhanced_sentence": "The sourceIpAddress2 parameter defines the upper portion of the destination IP address range for Process Data communication in the TRDP protocol. This rule applies during PD subscription operations when configuring multicast destination addressing. When implemented correctly, it enables proper IP address generation for destination endpoints. The prerequisite is that the application must provide valid IP address components, with sourceIpAddress1 defining the lower portion and sourceIpAddress2 defining the upper portion to form the complete destination IP address. This addressing mechanism works in conjunction with timeout parameters that define reception timeouts and timeoutBehavior that specifies actions when timeout conditions occur. The rule ensures consistent IP address generation across PD subscription, resubscription, and indication operations while maintaining compatibility with other TRDP parameters including etbTopoCnt, opTrnTopoCnt, comId, and sequence counters as defined in Table A.3.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.6 Process Data -> A.6.6 Interaction between application and TRDP protocol layer -> Table A.4 芒聙聯 TRDP service primitives\"\nRule: sourceIpAddress2 Defines the upper IP address in destinationIpAddress IP destination address, generated timeout Timeout (rxTime) for Process Data to be timeoutBehaviour Optional behaviour in case of a PD_resubscribe: TRDP user to TRDP layer handle handle for this subscription; etbTopoCnt as defined in Table A.3 opTrnTopoCnt as defined in Table A.3 sourceIpAddress1 IP source address, generated out of Defines the lower IP address in sourceIpAddress2 Defines the upper IP address in destinationIpAddress IP destination address, generated PD.unsubscribe: TRDP user to TRDP layer handle handle returned by the TRDP layer PD.indicate: TRDP layer to TRDP user handle handle returned by the TRDP layer sourceIpAddress Received source IP address destinationIpAddress Received destination IP address, as sequenceCounter Received sequence counter, as protocolVersion Received protocol version, as msgType process data (Pd) comId Received ComId, as defined in etbTopoCnt Received topo count, as defined in opTrnTopoCnt Received topo count, as defined in replyIComId Received reply ComId, as defined in replyIpAddress Received reply IP address userRef User reference given in status 0 OK, != 0 NOK 1 timeout 6 no subscription timeoutBehaviour Optional behaviour in case of a reserved as defined in Table A.3 dataset Received user data, as defined in datasetLength Received user data size, as defined PD.get: TRDP user to TRDP layer handle handle returned by the TRDP layer sourceIpAddress Received source IP address destinationIpAddress Received destination IP sequenceCounter Received sequence counter, as protocolVersion Received protocol version, as msgType process data (Pd) comId Received ComId, as defined in etbTopoCnt Received topo count, as defined in opTrnTopoCnt Received topo count, as defined in replyIComId Received reply ComId, as defined in replyIpAddress Received reply IP address userRef User reference given in status 0 OK, != 0 NOK 1 timeout timeoutBehaviour Optional behaviour in case of a reserved as defined in Table A.3 dataset Received user data, as defined in datasetLength Received user data size, as defined\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)",
    "sentence": "Each TRDP user (replier) that wants to receive MD shall register as listener for MD.",
    "enhanced_sentence": "Each TRDP user (replier) intending to receive Message Data (MD) must register as an MD listener during initialization or when MD reception capability is required. This registration establishes the necessary binding between the TRDP layer and the application, enabling the protocol stack to identify valid message recipients. The registration must include valid topography counter values that will be used to verify incoming message compatibility. Without proper listener registration, all incoming MD messages targeting that user will be discarded by the TRDP layer, preventing unauthorized or misconfigured message processing. This rule applies whenever a TRDP entity needs to function as a replier (listener) in MD communication sessions and must be completed before any MD message processing can occur.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)\"\nRule: Each TRDP user (replier) that wants to receive MD shall register as listener for MD.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  },
  {
    "heading": "Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)",
    "sentence": "The MD.reply of a listener shall use as source IP address the IP address of the listener and as source URI the URI of the listener.",
    "enhanced_sentence": "When a TRDP listener generates an MD.reply message in response to a valid request message (MsgType Mr) that matches registered topography counters and session parameters, the reply message must be constructed using the listener's own network identity. Specifically, the source IP address field shall contain the IP address assigned to the listener device, and the source URI field shall contain the URI identifier of the listener. This ensures proper routing of the reply back to the original requester and maintains consistent endpoint identification throughout the communication session. This rule applies after the TRDP layer has received the MD.reply data from the application layer and before transmitting the reply message as a unicast response.",
    "final_prompt": "You are analyzing a rule from the TRDP v2 protocol specification.\n        \nContext: This rule appears under the section \"Train Real-Time Data Protocol (TRDP) -> A.7 Message Data -> A.7.8 MD protocol state machine -> A.7.8.2 TRDP Layer 芒聙聯 Replier (Listener)\"\nRule: The MD.reply of a listener shall use as source IP address the IP address of the listener and as source URI the URI of the listener.\n        \nYour task is to enhance this rule by providing additional context that would help developers understand:\n1. What specific protocol behavior this rule governs\n2. When this rule applies in the protocol flow\n3. What the expected outcome should be when this rule is followed\n4. Any prerequisites or conditions that must be met\n        \nPlease provide an enhanced version of this rule that includes necessary context while maintaining technical accuracy. Keep the enhancement concise but comprehensive.\n        \nFormat your response as:\nEnhanced Rule: [your enhanced version here]\n"
  }
]